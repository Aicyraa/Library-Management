@import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');

:root {
   /* Book Card Colors */
   --fiction-red: hsl(0, 69%, 33%);
   --self-help-green: hsl(163, 81%, 27%);
   --self-help-blue: hsl(194, 86%, 33%);
   --biography-purple: hsl(267, 60%, 44%);
   --sci-fi-pink: hsl(331, 60%, 49%);
   --history-red: hsl(0, 74%, 42%);

   /* UI Colors */
   --primary-purple: hsl(244, 77%, 62%);
   --background-white: hsl(0, 0%, 100%);
   --text-dark: hsl(215, 28%, 17%);
   --text-gray: hsl(220, 9%, 46%);

   /* Stats Colors */
   --stats-blue-bg: hsl(210, 100%, 96%);
   --stats-blue-text: hsl(210, 100%, 50%);
   --stats-green-bg: hsl(150, 100%, 96%);
   --stats-green-text: hsl(150, 100%, 35%);
   --stats-orange-bg: hsl(30, 100%, 96%);
   --stats-orange-text: hsl(30, 100%, 50%);
   --stats-purple-bg: hsl(260, 100%, 96%);
   --stats-purple-text: hsl(260, 100%, 60%);

   /* Progress Bar */
   --progress-black: hsl(255, 11%, 19%);
   --progress-gray: hsl(216, 12%, 84%);

   /* Badge Background */
   --badge-bg: hsl(220, 14%, 96%);

   /* Header/Nav */
   --nav-gray: hsl(210, 20%, 98%);

   /* shadow */
   --shadow: hsl(215, 10%, 17%, 0.1);

   /* Font */
   --font-family: "Courier New", Courier, monospace;
}

* {
   margin: 0;
   padding: 0;
   box-sizing: border-box;
   font-family: "Montserrat";
}

body {
   font-family: var(--font-family);
   height: 100vh;
   display: flex;
   flex-direction: column;
}

/* Navbar */
.navbar {
   position: relative; /* Ensure it stays above sidebar on mobile if needed */
   z-index: 60;
   display: flex;
   align-items: center;
   justify-content: space-between;
   gap: 1rem;
   padding: 0.5rem 1.5rem;
   min-height: 3.5rem;
   height: auto;
   background-color: var(--background-white);
   border-bottom: 1px solid #e5e7eb;
}

.navbar-left {
   display: flex;
   align-items: center;
   gap: 1rem;
}

#logo {
   width: 32px;
   height: 32px;
}

.navbar #text {
   display: flex;
   flex-direction: column;
}

.navbar #text p:nth-child(1) {
   font-weight: bold;
   font-size: 1rem;
   color: var(--text-dark);
}

.navbar #text p:nth-child(2) {
   font-size: 0.75rem;
   color: var(--text-gray);
}

/* Visibility Utilities */
.mobile-only {
   display: none !important;
}
.desktop-only {
   display: flex;
}

/* Main Layout */
.main {
   display: flex;
   flex: 1;
   overflow: hidden;
   position: relative;
}

/* Sidebar */
.sidebar-container {
   width: 280px;
   background-color: var(--background-white);
   border-right: 1px solid #e5e7eb;
   display: flex;
   flex-direction: column;
   padding: 1.5rem;
   overflow-y: auto;
   transition:
      width 0.3s ease,
      padding 0.3s ease,
      transform 0.3s ease;
   position: relative;
   z-index: 10;
}

/* Sidebar Closed State */
.sidebar-container.closed {
   width: 70px; /* Collapsed width */
   padding: 1.5rem 0.5rem;
}

.sidebar-header {
   display: flex;
   align-items: center;
   gap: 0.75rem;
   margin-bottom: 1.5rem;
   min-height: 32px;
}

/* Center button when sidebar is closed */
.sidebar-container.closed .sidebar-header {
   justify-content: center;
   margin-bottom: 0;
}

/* Hide content when sidebar is closed */
.sidebar-container.closed #sidebar-title,
.sidebar-container.closed .sidebar-content,
.sidebar-container.closed .sidebar-divider,
.sidebar-container.closed .search-wrapper {
   display: none;
}

/* Sidebar Toggle Buttons (Shared Styles) */
.sidebar-btn {
   background: transparent;
   border: none;
   cursor: pointer;
   padding: 4px;
   border-radius: 4px;
   display: flex;
   align-items: center;
   justify-content: center;
}

.sidebar-btn:hover {
   background-color: #f3f4f6;
}

.sidebar-btn img {
   filter: brightness(0) saturate(100%); /* Ensure icons are black/visible */
}

.icon-filter,
.icon-close {
   width: 24px;
   height: 24px;
}

/* Default state (Sidebar Open): Show Close, Hide Filter */
.icon-filter {
   display: none;
}
.icon-close {
   display: block;
}

/* In Closed State (managed by JS class on button) */
.sidebar-btn.closed .icon-filter {
   display: block;
}
.sidebar-btn.closed .icon-close {
   display: none;
}

#sidebar-title {
   font-size: 1.25rem;
   font-weight: bold;
   color: var(--text-dark);
   white-space: nowrap;
}

.sidebar-content {
   display: flex;
   flex-direction: column;
   gap: 1.5rem;
   opacity: 1;
   transition: opacity 0.2s ease;
}

.sidebar-group {
   display: flex;
   flex-direction: column;
   gap: 0.2rem;
}

.sidebar-label {
   font-size: 0.875rem;
   font-weight: 600;
   color: var(--text-dark);
   white-space: nowrap;
}

.search-wrapper {
   position: relative;
}

.search-icon {
   position: absolute;
   left: 10px;
   top: 50%;
   transform: translateY(-50%);
   width: 16px;
   height: 16px;
   opacity: 0.5;
}

#sidebar-search {
   width: 100%;
   padding: 0.5rem 0.5rem 0.5rem 2.2rem;
   border: 1px solid #e5e7eb;
   border-radius: 6px;
   background-color: #f9fafb;
   font-family: inherit;
}

#sidebar-sort {
   padding: 0.5rem;
   border: 1px solid #e5e7eb;
   border-radius: 6px;
   background-color: #f9fafb;
   font-family: inherit;
}

.sidebar-divider {
   height: 1px;
   background-color: #e5e7eb;
}

.sidebar-category {
   display: flex;
   align-items: center;
   gap: 0.5rem;
   padding: 0.25rem 0;
}

.category-text {
   color: var(--text-dark);
   white-space: nowrap;
   font-size: .85rem;
}

/* Main Book Container */
.book-container {
   flex: 1;
   background-color: #f9fafb;
   padding: 2rem;
   overflow-y: auto;
}

.book-navbar {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: 2rem;
}

#book-navbar-count {
   font-size: 1.5rem;
   font-weight: 700;
   color: var(--text-dark);
}

#book-navbar-add {
   background-color: var(--text-dark);
   color: white;
   border: none;
   padding: 0.5rem 1rem;
   border-radius: 6px;
   font-family: inherit;
   cursor: pointer;
   display: flex;
   align-items: center;
   gap: 0.5rem;
}

/* Statistics */
.books-status {
   background-color: white;
   padding: 1.5rem;
   border-radius: 12px;
   margin-bottom: 2rem;
   border: 1px solid #e5e7eb;
}

.status-title {
   font-size: 1.1rem;
   font-weight: 700;
   margin-bottom: 1rem;
   color: var(--text-dark);
}

.status-grid {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
   gap: 1.5rem;
}

.status-card {
   display: flex;
   align-items: center;
   gap: 1rem;
}

.status-icon-wrapper {
   width: 48px;
   height: 48px;
   border-radius: 12px;
   display: flex;
   align-items: center;
   justify-content: center;
   flex-shrink: 0;
}

.status-icon-wrapper svg {
   width: 24px;
   height: 24px;
}

.status-icon-wrapper.blue {
   background-color: var(--stats-blue-bg);
   color: var(--stats-blue-text);
}
.status-icon-wrapper.green {
   background-color: var(--stats-green-bg);
   color: var(--stats-green-text);
}
.status-icon-wrapper.orange {
   background-color: var(--stats-orange-bg);
   color: var(--stats-orange-text);
}
.status-icon-wrapper.purple {
   background-color: var(--stats-purple-bg);
   color: var(--stats-purple-text);
}

.status-info {
   display: flex;
   flex-direction: column;
   min-width: 0;
}

.status-label {
   font-size: 0.875rem;
   color: var(--text-gray);
   margin-bottom: 0.25rem;
   white-space: nowrap;
   overflow: hidden;
   text-overflow: ellipsis;
}

.status-value {
   font-size: 1.25rem;
   font-weight: 700;
   color: var(--text-dark);
   
}

/* Books Grid */
.books {
   display: grid;
   grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
   gap: 1.5rem;
}

.book-card {
   background-color: white;
   border-radius: 12px;
   overflow: hidden;
   border: 1px solid #e5e7eb;
   display: flex;
   flex-direction: column;
   transition: transform 0.2s;
}

.book-card:hover {
   box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -1px rgba(0, 0, 0, 0.06);
   transform: translateY(-2px);
}

.card-top {
   height: 180px;
   position: relative;
   display: flex;
   align-items: center;
   justify-content: center;
}

.card-top > .settings {
   background-color: hsl(210, 19%, 66%, 0.2);
   width: 1.1rem;
   position: absolute;
   padding: 2px;
   border-radius: 4px;
   opacity: 0;
   transition: 100ms ease-in-out;
   transform: scale(.7);
}

.edit {
   bottom: 8px;
   right: 0.5rem;
}

.delete {
   bottom: 8px;
   right: 2rem;
}

.card-top:hover > .edit, .card-top:hover > .delete {
   opacity: 1;
   cursor: pointer;
   transform: scale(1);
}

.edit:hover, .delete:hover {
   transform: scale(1.2) !important;
   background-color: hsl(210, 19%, 89%);
}

.badge {
   position: absolute;
   top: 8px;
   right: 8px;
   background-color: rgba(255, 255, 255, 0.9);
   padding: 0.25rem 0.75rem;
   border-radius: 100px;
   font-size: 0.65rem;
   font-weight: 600;
   color: var(--text-dark);
}

.book-icon {
   width: 64px;
   height: 64px;
   color: rgba(255, 255, 255, 0.8);
}

.card-bottom {
   padding: 1.2rem 0.7rem;
   display: flex;
   flex-direction: column;
   gap: .5rem;
}

.book-title {
   font-size: 1.1rem;
   font-weight: 700;
   color: var(--text-dark);
}

.book-meta-icon {
   width: 1.1rem;
   height: 1.1rem;
}

.book-meta {
   display: grid;
   grid-template: repeat(2, 1fr) / 1.3rem 1fr;
   justify-content: start;
   align-items: center;
   gap: 0.15rem;
   font-size: 0.7rem;
   color: var(--text-gray);
   font-weight: 600;
}

.book-meta-pages {
   display: flex;
   justify-content: space-between;
   align-items: center;
   gap: 0.4em;
}

.book-current-page {
   font-size: .85em;
}

.progress-section {
   margin-top: auto;
}

.progress-label {
   display: flex;
   justify-content: space-between;
   font-size: 0.6rem;
   color: var(--text-dark);
   font-weight: 600;
   margin-bottom: 0.5rem;
}

.progress-bar {
   width: 100%;
   height: 8px;
   background-color: var(--progress-gray);
   border-radius: 4px;
   overflow: hidden;
   box-shadow: 0 0 1px var(--progress-black);
}

.progress-fill {
   height: 100%;
   background-color: var(--progress-black);
   border-radius: 4px;
}

/* ==================== */
/* Modal & Overlay Styles */
/* ==================== */

.overlay {
   position: fixed;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   background-color: rgba(0, 0, 0, 0.5);
   z-index: 100;
   opacity: 0;
   visibility: hidden;
   transition: opacity 0.3s ease, visibility 0.3s ease;
}

.overlay.active {
   opacity: 1;
   visibility: visible;
}

.form-modal {
   position: fixed;
   top: 50%;
   left: 50%;
   transform: translate(-50%, -50%) scale(0.9);
   background-color: white;
   border-radius: 16px;
   box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
   z-index: 101;
   width: 90%;
   max-width: 480px;
   max-height: 90vh;
   overflow-y: auto;
   scrollbar-width: none; /* Firefox */
   -ms-overflow-style: none; /* IE/Edge */
   opacity: 0;
   visibility: hidden;
   transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
}

.form-modal::-webkit-scrollbar {
   display: none; /* Chrome, Safari, Opera */
}

.form-modal.active {
   opacity: 1;
   visibility: visible;
   transform: translate(-50%, -50%) scale(1);
}

.form-modal-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   padding: 0.2rem 1.25rem;
   border-bottom: 1px solid #e5e7eb;
}

.form-modal-title {
   font-size: 1.1rem;
   font-weight: 700;
   color: var(--text-dark);
}

.form-modal-close {
   background: transparent;
   border: none;
   cursor: pointer;
   padding: 0.5rem;
   border-radius: 8px;
   display: flex;
   align-items: center;
   justify-content: center;
   transition: background-color 0.2s ease;
}

.form-modal-close:hover {
   background-color: #f3f4f6;
}

.form-modal-close img {
   width: 20px;
   height: 20px;
   filter: brightness(0) saturate(100%);
}

.form-modal-body {
   padding: 1rem 1.25rem;
   display: flex;
   flex-direction: column;
   gap: 1rem;
}

.form-group {
   display: flex;
   flex-direction: column;
   gap: 0.5rem;
}

.form-row {
   display: grid;
   grid-template-columns: 1fr 1fr;
   gap: 1rem;
}

.form-label {
   font-size: 0.8rem;
   font-weight: 600;
   color: var(--text-dark);
}

.form-input {
   padding: 0.6rem 0.85rem;
   border: 1px solid #e5e7eb;
   border-radius: 8px;
   font-size: 0.8rem;
   font-family: inherit;
   background-color: #f9fafb;
   transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.form-input:focus {
   outline: none;
   border-color: var(--primary-purple);
   box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.form-input::placeholder {
   color: #9ca3af !important;
}

/* Color Swatches */
.form-colors {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
   gap: 0.5rem;
}

.color-swatch {
   height: 30px;
   border-radius: 8px;
   cursor: pointer;
   box-shadow: 0 0 3px var(--progress-black);
   transition: transform 0.2s ease, border-color 0.2s ease;
   position: relative;
}

.color-swatch:hover {
   transform: scale(1.05);
}

.color-swatch.selected {
   border-color: var(--text-dark);
}

.color-swatch.selected::after {
   content: '';
   position: absolute;
   top: 50%;
   left: 50%;
   transform: translate(-50%, -50%);
   width: 14px;
   height: 14px;
   background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'%3E%3C/polyline%3E%3C/svg%3E");
   background-size: contain;
   background-repeat: no-repeat;
}

/* Form Buttons */
.form-actions {
   display: flex;
   justify-content: flex-end;
   gap: 0.75rem;
   padding-top: 0.5rem;
}

.btn {
   padding: 0.5rem 1.25rem;
   border-radius: 8px;
   font-size: 0.65rem;
   font-weight: 600;
   font-family: inherit;
   cursor: pointer;
   transition: background-color 0.2s ease, transform 0.1s ease;
}

.btn:active {
   transform: scale(0.98);
}

.btn-primary {
   background-color: var(--text-dark);
   color: white;
   border: none;
}

.btn-primary:hover {
   background-color: #1e3a5f;
}

.btn-secondary {
   background-color: transparent;
   color: var(--text-dark);
   border: 1px solid #e5e7eb;
}

.btn-secondary:hover {
   background-color: #f3f4f6;
}

/* Mobile Responsive */
@media (max-width: 768px) {
   /* Layout utilities */
   .mobile-only {
      display: flex !important;
   }
   .desktop-only {
      display: none;
   }

   .navbar {
      padding: 0.5rem 1rem;
      /* no special right padding needed if button is in flow */
   }

   /* Navbar Text: Allow wrap */
   /* Default behavior with min-height works. */

   /* Sidebar Overlay behavior */
   .sidebar-container {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      border-right: 1px solid #e5e7eb;
      z-index: 50;
      width: 260px;
      transform: translateX(0); /* Open state */
   }

   /* Closed on mobile means hidden */
   .sidebar-container.closed {
      transform: translateX(-100%);
      width: 260px; /* Override global 70px width */
      padding: 1.5rem; /* Override global padding reduction */
   }

   /* Book Navbar responsive */
   .book-navbar {
      gap: 1rem;
   }

   #book-navbar-add {
      padding: 0.4rem 0.8rem;
      font-size: 0.9rem;
   }

   #book-navbar-count {
      font-size: 1.25rem;
   }

   /* Statistics Grid Center */
   .status-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
   }

   .status-card {
      flex-direction: column;
      align-items: center;
      text-align: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 1rem;
      background-color: #f8fafc;
      border-radius: 8px;
   }

   .status-info {
      align-items: center;
   }

   /* Modal responsive */
   .form-modal {
      width: 95%;
      max-width: none;
      max-height: 90vh;
      border-radius: 12px;
   }

   .form-modal-header {
      padding: 0.85rem 1rem;
   }

   .form-modal-title {
      font-size: 1rem;
   }

   .form-modal-body {
      padding: 0.85rem 1rem;
      gap: 0.85rem;
   }

   .form-label {
      font-size: 0.75rem;
   }

   .form-input {
      padding: 0.5rem 0.75rem;
      font-size: 0.75rem;
   }

   .form-row {
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
   }

   .form-colors {
      grid-template-columns: repeat(auto-fit, minmax(36px, 1fr));
      gap: 0.4rem;
   }

   .form-actions {
      gap: 0.5rem;
      padding-top: 0.25rem;
   }

   .form-actions .btn {
      padding: 0.5rem 1rem;
      font-size: 0.75rem;
   }
}
